#1/bin/bash

export GOPATH=`pwd`

# Install golang protobuf compiler and library if they aren't present.
go get -u github.com/golang/protobuf/{proto,protoc-gen-go}
go get -u golang.org/x/net/html
go get -u code.google.com/p/goprotobuf/proto
go get -u labix.org/v2/mgo
go get -u labix.org/v2/mgo/bson
go get -u code.google.com/p/gcfg
go get -u github.com/gonum/matrix/mat64
go get -u github.com/Sirupsen/logrus

mkdir -p src/proto
protoc --plugin=bin/protoc-gen-go --go_out=src/ proto/*.proto

# Build the extractor binary (parse HTML to structured recipe.
go build extract
go build labeler
